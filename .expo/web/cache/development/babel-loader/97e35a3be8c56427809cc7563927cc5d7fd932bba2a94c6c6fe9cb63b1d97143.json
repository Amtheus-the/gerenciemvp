{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport api from \"../../services/api\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { PieChart, BarChart } from 'react-native-chart-kit';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Card, Divider } from 'react-native-paper';\nimport Icon from \"@expo/vector-icons/MaterialIcons\";\nvar DataListItem = function DataListItem(_ref) {\n  var label = _ref.label,\n    value = _ref.value,\n    _ref$showBorder = _ref.showBorder,\n    showBorder = _ref$showBorder === void 0 ? false : _ref$showBorder,\n    _ref$valueColor = _ref.valueColor,\n    valueColor = _ref$valueColor === void 0 ? '#333' : _ref$valueColor,\n    _ref$valueWeight = _ref.valueWeight,\n    valueWeight = _ref$valueWeight === void 0 ? 'bold' : _ref$valueWeight;\n  return _jsxs(View, {\n    style: [styles.listItem, showBorder && styles.listItemBorder],\n    children: [_jsx(Text, {\n      style: styles.listLabel,\n      children: label\n    }), _jsx(Text, {\n      style: [styles.listValue, {\n        color: valueColor,\n        fontWeight: valueWeight\n      }],\n      children: value\n    })]\n  });\n};\nimport { useAuth } from \"../../context/AuthContext\";\nvar formatarMoeda = function formatarMoeda(valor) {\n  return `R$ ${parseFloat(valor || 0).toLocaleString('pt-BR', {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  })}`;\n};\nimport { useNavigation } from '@react-navigation/native';\nimport { Button } from 'react-native-paper';\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function Dashboard() {\n  var screenWidth = Dimensions.get('window').width;\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    metricas = _useState2[0],\n    setMetricas = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useState7 = useState({\n      resultado: true,\n      impostos: true\n    }),\n    _useState8 = _slicedToArray(_useState7, 2),\n    cardsExpandidos = _useState8[0],\n    setCardsExpandidos = _useState8[1];\n  console.log('[Dashboard] Usuário logado:', user);\n  var mesAtual = 12;\n  var anoAtual = 2025;\n  var meses = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\n  var navigation = useNavigation();\n  var toggleCardExpansao = function toggleCardExpansao(cardId) {\n    setCardsExpandidos(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, cardId, !prev[cardId]));\n    });\n  };\n  var calcularValores = function calcularValores() {\n    var _metricas$pessoaFisic, _metricas$pessoaJurid, _metricas$pessoaFisic2;\n    if (!metricas) return {\n      receitas: 0,\n      despesas: 0,\n      resultado: 0\n    };\n    console.log('[Dashboard] Métricas para cálculo:', metricas);\n    var receitas = parseFloat(((_metricas$pessoaFisic = metricas.pessoaFisica) == null ? void 0 : _metricas$pessoaFisic.rendimentos) || 0) + parseFloat(((_metricas$pessoaJurid = metricas.pessoaJuridica) == null ? void 0 : _metricas$pessoaJurid.faturamento) || 0);\n    var despesas = parseFloat(((_metricas$pessoaFisic2 = metricas.pessoaFisica) == null ? void 0 : _metricas$pessoaFisic2.pagamentos) || 0) + parseFloat(metricas.despesas || 0);\n    var resultado = receitas - despesas;\n    console.log('[Dashboard] Valores calculados:', {\n      receitas: receitas,\n      despesas: despesas,\n      resultado: resultado\n    });\n    return {\n      receitas: receitas,\n      despesas: despesas,\n      resultado: resultado\n    };\n  };\n  var _calcularValores = calcularValores(),\n    receitas = _calcularValores.receitas,\n    despesas = _calcularValores.despesas,\n    resultado = _calcularValores.resultado;\n  useEffect(function () {\n    function fetchMetricas() {\n      return _fetchMetricas.apply(this, arguments);\n    }\n    function _fetchMetricas() {\n      _fetchMetricas = _asyncToGenerator(function* () {\n        try {\n          console.log('[Dashboard] Buscando métricas:', `/api/dashboard/metricas?mes=${mesAtual}&ano=${anoAtual}`);\n          var response = yield api.get(`/api/dashboard/metricas?mes=${mesAtual}&ano=${anoAtual}`);\n          console.log('[Dashboard] Resposta da API:', response);\n          if (response && response.data) {\n            setMetricas(response.data);\n            console.log('[Dashboard] Métricas recebidas:', response.data);\n          } else {\n            setMetricas(response);\n            console.log('[Dashboard] Métricas recebidas:', response);\n          }\n        } catch (err) {\n          console.log('[Dashboard] Erro ao buscar métricas:', err);\n          setError('Erro ao carregar dados do usuário');\n        } finally {\n          setLoading(false);\n        }\n      });\n      return _fetchMetricas.apply(this, arguments);\n    }\n    fetchMetricas();\n  }, [user, mesAtual, anoAtual]);\n  if (loading) {\n    return _jsx(ActivityIndicator, {\n      style: styles.loading,\n      size: \"large\",\n      color: \"#1976d2\"\n    });\n  }\n  var DashboardCard = function DashboardCard(_ref2) {\n    var title = _ref2.title,\n      cardId = _ref2.cardId,\n      children = _ref2.children;\n    return _jsxs(Card, {\n      style: styles.card,\n      children: [_jsxs(TouchableOpacity, {\n        style: styles.cardHeader,\n        onPress: function onPress() {\n          return toggleCardExpansao(cardId);\n        },\n        activeOpacity: 0.8,\n        children: [_jsxs(View, {\n          style: styles.cardTitleContainer,\n          children: [_jsx(Icon, {\n            name: \"drag-indicator\",\n            size: 18,\n            color: \"#ccc\",\n            style: styles.dragIcon\n          }), _jsx(Text, {\n            style: styles.cardTitle,\n            children: title\n          })]\n        }), _jsx(Icon, {\n          name: cardsExpandidos[cardId] ? \"expand-less\" : \"expand-more\",\n          size: 24,\n          color: \"#6c757d\"\n        })]\n      }), cardsExpandidos[cardId] && _jsx(View, {\n        style: styles.cardContent,\n        children: children\n      })]\n    });\n  };\n  var RenderResultadoDoMes = function RenderResultadoDoMes() {\n    return _jsxs(_Fragment, {\n      children: [_jsx(View, {\n        style: styles.chartPlaceholder,\n        children: _jsx(Text, {\n          style: styles.chartText,\n          children: \"[Placeholder: Gr\\xE1fico de Receitas vs Despesas]\"\n        })\n      }), _jsxs(View, {\n        style: [styles.resultadoBox, {\n          backgroundColor: '#e9ecef'\n        }],\n        children: [_jsx(Text, {\n          style: styles.resultadoCaption,\n          children: \"Resultado L\\xEDquido\"\n        }), _jsx(Text, {\n          style: [styles.resultadoValue, {\n            color: resultado >= 0 ? '#00B389' : '#FF4873'\n          }],\n          children: formatarMoeda(resultado)\n        })]\n      })]\n    });\n  };\n  var RenderImpostos = function RenderImpostos() {\n    var _metricas$pessoaFisic3, _metricas$pessoaFisic4, _metricas$pessoaFisic5, _metricas$pessoaFisic6, _metricas$pessoaJurid2, _metricas$pessoaJurid3, _metricas$pessoaJurid4, _metricas$pessoaJurid5;\n    return _jsxs(_Fragment, {\n      children: [((user == null ? void 0 : user.tipoPessoa) === 'PF' || (user == null ? void 0 : user.tipoPessoa) === 'HIBRIDO') && _jsxs(View, {\n        style: styles.impostosSection,\n        children: [_jsx(Text, {\n          style: styles.impostosSubtitle,\n          children: \"Carn\\xEA-Le\\xE3o (PF)\"\n        }), _jsx(DataListItem, {\n          label: \"Rendimentos (PF)\",\n          value: formatarMoeda(metricas == null ? void 0 : (_metricas$pessoaFisic3 = metricas.pessoaFisica) == null ? void 0 : _metricas$pessoaFisic3.rendimentos),\n          valueColor: \"#00B389\",\n          valueWeight: \"700\"\n        }), _jsx(DataListItem, {\n          label: \"Despesas Dedut\\xEDveis\",\n          value: formatarMoeda(metricas == null ? void 0 : (_metricas$pessoaFisic4 = metricas.pessoaFisica) == null ? void 0 : _metricas$pessoaFisic4.pagamentos)\n        }), _jsx(DataListItem, {\n          label: \"DNZ (Despesa p/ Zerar DARF)\",\n          value: formatarMoeda(metricas == null ? void 0 : (_metricas$pessoaFisic5 = metricas.pessoaFisica) == null ? void 0 : _metricas$pessoaFisic5.dnz)\n        }), _jsx(DataListItem, {\n          label: \"DARF a Pagar\",\n          value: formatarMoeda(metricas == null ? void 0 : (_metricas$pessoaFisic6 = metricas.pessoaFisica) == null ? void 0 : _metricas$pessoaFisic6.darf),\n          showBorder: true,\n          valueColor: \"#FF4873\",\n          valueWeight: \"700\"\n        })]\n      }), ((user == null ? void 0 : user.tipoPessoa) === 'PJ' || (user == null ? void 0 : user.tipoPessoa) === 'HIBRIDO') && _jsxs(View, {\n        style: [styles.impostosSection, (user == null ? void 0 : user.tipoPessoa) === 'HIBRIDO' && {\n          marginTop: 16\n        }],\n        children: [_jsx(Text, {\n          style: styles.impostosSubtitle,\n          children: \"Simples Nacional (PJ)\"\n        }), _jsx(DataListItem, {\n          label: \"Faturamento (PJ)\",\n          value: formatarMoeda(metricas == null ? void 0 : (_metricas$pessoaJurid2 = metricas.pessoaJuridica) == null ? void 0 : _metricas$pessoaJurid2.faturamento),\n          valueColor: \"#00B389\",\n          valueWeight: \"700\"\n        }), _jsx(DataListItem, {\n          label: \"RBT12 (Receita 12 meses)\",\n          value: formatarMoeda(metricas == null ? void 0 : (_metricas$pessoaJurid3 = metricas.pessoaJuridica) == null ? void 0 : _metricas$pessoaJurid3.rbt12)\n        }), _jsx(DataListItem, {\n          label: \"Al\\xEDquota Efetiva\",\n          value: `${metricas == null ? void 0 : (_metricas$pessoaJurid4 = metricas.pessoaJuridica) == null ? void 0 : _metricas$pessoaJurid4.aliquotaEfetiva}%`\n        }), _jsx(DataListItem, {\n          label: \"DAS a Pagar\",\n          value: formatarMoeda(metricas == null ? void 0 : (_metricas$pessoaJurid5 = metricas.pessoaJuridica) == null ? void 0 : _metricas$pessoaJurid5.das),\n          showBorder: true,\n          valueColor: \"#FF4873\",\n          valueWeight: \"700\"\n        })]\n      })]\n    });\n  };\n  var RenderDespesas = function RenderDespesas() {\n    var despesasData = (metricas == null ? void 0 : metricas.despesasIndividuais) || [];\n    var totalDespesas = despesasData.reduce(function (acc, despesa) {\n      return acc + parseFloat(despesa.value || 0);\n    }, 0);\n    return _jsxs(_Fragment, {\n      children: [_jsx(PieChart, {\n        data: despesasData.map(function (despesa, idx) {\n          return {\n            name: despesa.name,\n            population: despesa.value,\n            color: ['#3f51b5', '#f50057', '#00B389', '#FF4873', '#FFC107', '#009688'][idx % 6],\n            legendFontColor: '#333',\n            legendFontSize: 12\n          };\n        }),\n        width: screenWidth - 40,\n        height: 220,\n        chartConfig: {\n          color: function color() {\n            var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n            return `rgba(63, 81, 181, ${opacity})`;\n          }\n        },\n        accessor: \"population\",\n        backgroundColor: \"transparent\",\n        paddingLeft: \"15\",\n        absolute: true\n      }), _jsxs(View, {\n        style: styles.list,\n        children: [despesasData.map(function (despesa, idx) {\n          var percent = totalDespesas > 0 ? Math.round(parseFloat(despesa.value || 0) / totalDespesas * 100) : 0;\n          return _jsx(DataListItem, {\n            label: `${despesa.name} (${percent}%)`,\n            value: `-R$ ${parseFloat(despesa.value || 0).toLocaleString('pt-BR', {\n              minimumFractionDigits: 2\n            })}`,\n            showBorder: true\n          }, despesa.name);\n        }), _jsx(DataListItem, {\n          label: \"Total\",\n          value: `-R$ ${totalDespesas.toLocaleString('pt-BR', {\n            minimumFractionDigits: 2\n          })}`,\n          valueColor: \"#FF4873\",\n          valueWeight: \"700\"\n        })]\n      })]\n    });\n  };\n  return _jsxs(ScrollView, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.header,\n      children: [_jsx(Text, {\n        style: styles.title,\n        children: \"Vis\\xE3o Geral\"\n      }), _jsxs(Text, {\n        style: styles.periodo,\n        children: [\"Per\\xEDodo: \", _jsxs(Text, {\n          style: styles.bold,\n          children: [meses[mesAtual - 1], \"/\", anoAtual]\n        })]\n      })]\n    }), _jsx(DashboardCard, {\n      title: \"Resultado do M\\xEAs\",\n      cardId: \"resultado\",\n      children: _jsx(RenderResultadoDoMes, {})\n    }), _jsx(DashboardCard, {\n      title: \"Impostos\",\n      cardId: \"impostos\",\n      children: _jsx(RenderImpostos, {})\n    }), _jsx(DashboardCard, {\n      title: \"Despesas por Categoria\",\n      cardId: \"despesas\",\n      children: _jsx(RenderDespesas, {})\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#1f1f1fff',\n    padding: 16\n  },\n  loading: {\n    marginTop: 40\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#1976d2'\n  },\n  periodo: {\n    fontSize: 14,\n    color: '#6c757d'\n  },\n  bold: {\n    fontWeight: 'bold'\n  },\n  error: {\n    color: 'red',\n    textAlign: 'center',\n    marginBottom: 8\n  },\n  card: {\n    marginBottom: 20,\n    elevation: 3,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  cardTitleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  dragIcon: {\n    marginRight: 4\n  },\n  cardTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333'\n  },\n  cardContent: {\n    padding: 16\n  },\n  listItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingVertical: 8\n  },\n  listItemBorder: {\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  listLabel: {\n    fontSize: 16,\n    color: '#555'\n  },\n  listValue: {\n    fontSize: 16\n  },\n  list: {\n    paddingTop: 8\n  },\n  chartPlaceholder: {\n    height: 150,\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 4,\n    marginBottom: 16\n  },\n  chartText: {\n    color: '#999',\n    fontSize: 14\n  },\n  resultadoBox: {\n    padding: 12,\n    borderRadius: 4,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#ddd'\n  },\n  resultadoCaption: {\n    fontSize: 12,\n    color: '#6c757d'\n  },\n  resultadoValue: {\n    fontSize: 32,\n    fontWeight: '700'\n  },\n  impostosSection: {\n    marginBottom: 8\n  },\n  impostosSubtitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#6c757d',\n    marginBottom: 8\n  }\n});","map":{"version":3,"names":["api","React","useState","useEffect","View","Text","ScrollView","StyleSheet","ActivityIndicator","TouchableOpacity","PieChart","BarChart","Dimensions","Card","Divider","Icon","DataListItem","_ref","label","value","_ref$showBorder","showBorder","_ref$valueColor","valueColor","_ref$valueWeight","valueWeight","_jsxs","style","styles","listItem","listItemBorder","children","_jsx","listLabel","listValue","color","fontWeight","useAuth","formatarMoeda","valor","parseFloat","toLocaleString","minimumFractionDigits","maximumFractionDigits","useNavigation","Button","jsx","jsxs","Fragment","_Fragment","Dashboard","screenWidth","get","width","_useAuth","user","_useState","_useState2","_slicedToArray","metricas","setMetricas","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useState7","resultado","impostos","_useState8","cardsExpandidos","setCardsExpandidos","console","log","mesAtual","anoAtual","meses","navigation","toggleCardExpansao","cardId","prev","_objectSpread","_defineProperty","calcularValores","_metricas$pessoaFisic","_metricas$pessoaJurid","_metricas$pessoaFisic2","receitas","despesas","pessoaFisica","rendimentos","pessoaJuridica","faturamento","pagamentos","_calcularValores","fetchMetricas","_fetchMetricas","apply","arguments","_asyncToGenerator","response","data","err","size","DashboardCard","_ref2","title","card","cardHeader","onPress","activeOpacity","cardTitleContainer","name","dragIcon","cardTitle","cardContent","RenderResultadoDoMes","chartPlaceholder","chartText","resultadoBox","backgroundColor","resultadoCaption","resultadoValue","RenderImpostos","_metricas$pessoaFisic3","_metricas$pessoaFisic4","_metricas$pessoaFisic5","_metricas$pessoaFisic6","_metricas$pessoaJurid2","_metricas$pessoaJurid3","_metricas$pessoaJurid4","_metricas$pessoaJurid5","tipoPessoa","impostosSection","impostosSubtitle","dnz","darf","marginTop","rbt12","aliquotaEfetiva","das","RenderDespesas","despesasData","despesasIndividuais","totalDespesas","reduce","acc","despesa","map","idx","population","legendFontColor","legendFontSize","height","chartConfig","opacity","length","undefined","accessor","paddingLeft","absolute","list","percent","Math","round","container","header","periodo","bold","create","flex","padding","flexDirection","justifyContent","alignItems","marginBottom","fontSize","textAlign","elevation","shadowColor","shadowOffset","shadowOpacity","shadowRadius","borderBottomWidth","borderBottomColor","marginRight","paddingVertical","paddingTop","borderRadius","borderWidth","borderColor"],"sources":["C:/mvp_gerencie/mobile/src/screens/usuario/Dashboard.js"],"sourcesContent":["import api from '../../services/api';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { View, Text, ScrollView, StyleSheet, ActivityIndicator, TouchableOpacity } from 'react-native';\r\nimport { PieChart, BarChart } from 'react-native-chart-kit';\r\nimport { Dimensions } from 'react-native';\r\nimport { Card, Divider } from 'react-native-paper';\r\nimport Icon from 'react-native-vector-icons/MaterialIcons'; // Exemplo de ícones\r\n// Certifique-se de que os paths estão corretos no seu projeto\r\n// import { useAuth } from '../../context/AuthContext'; \r\n\r\n// --- 1. Componente de Item de Lista de Dados (Reutilizável) ---\r\nconst DataListItem = ({ label, value, showBorder = false, valueColor = '#333', valueWeight = 'bold' }) => (\r\n    <View style={[styles.listItem, showBorder && styles.listItemBorder]}>\r\n        <Text style={styles.listLabel}>{label}</Text>\r\n        <Text style={[styles.listValue, { color: valueColor, fontWeight: valueWeight }]}>{value}</Text>\r\n    </View>\r\n);\r\n\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\n// --- 3. Funções de Formatação e Cálculo ---\r\n\r\nconst formatarMoeda = (valor) => {\r\n    return `R$ ${parseFloat(valor || 0).toLocaleString('pt-BR', {\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2\r\n    })}`;\r\n};\r\n\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Button } from 'react-native-paper';\r\n// --- 4. Componente Principal do Dashboard ---\r\nexport default function Dashboard() {\r\n    const screenWidth = Dimensions.get('window').width;\r\n    const { user } = useAuth();\r\n    const [metricas, setMetricas] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [cardsExpandidos, setCardsExpandidos] = useState({\r\n        resultado: true,\r\n        impostos: true,\r\n        // Adicione outros cards aqui\r\n    });\r\n    console.log('[Dashboard] Usuário logado:', user);\r\n    \r\n    const mesAtual = 12; // Exemplo fixo, adapte para seu seletor de mês\r\n    const anoAtual = 2025; // Exemplo fixo\r\n    const meses = [\r\n        'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',\r\n        'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'\r\n    ];\r\n    const navigation = useNavigation();\r\n\r\n    const toggleCardExpansao = (cardId) => {\r\n        setCardsExpandidos(prev => ({\r\n            ...prev,\r\n            [cardId]: !prev[cardId]\r\n        }));\r\n    };\r\n\r\n    const calcularValores = () => {\r\n        if (!metricas) return { receitas: 0, despesas: 0, resultado: 0 };\r\n        console.log('[Dashboard] Métricas para cálculo:', metricas);\r\n        const receitas = parseFloat(metricas.pessoaFisica?.rendimentos || 0) +\r\n            parseFloat(metricas.pessoaJuridica?.faturamento || 0);\r\n        const despesas = parseFloat(metricas.pessoaFisica?.pagamentos || 0) + \r\n                         parseFloat(metricas.despesas || 0); // Usando a métrica 'despesas' do primeiro bloco para o total\r\n        const resultado = receitas - despesas;\r\n        console.log('[Dashboard] Valores calculados:', { receitas, despesas, resultado });\r\n        return { receitas, despesas, resultado };\r\n    };\r\n    \r\n    const { receitas, despesas, resultado } = calcularValores();\r\n    \r\n    useEffect(() => {\r\n        async function fetchMetricas() {\r\n            try {\r\n                console.log('[Dashboard] Buscando métricas:', `/api/dashboard/metricas?mes=${mesAtual}&ano=${anoAtual}`);\r\n                const response = await api.get(`/api/dashboard/metricas?mes=${mesAtual}&ano=${anoAtual}`);\r\n                console.log('[Dashboard] Resposta da API:', response);\r\n                if (response && response.data) {\r\n                    setMetricas(response.data);\r\n                    console.log('[Dashboard] Métricas recebidas:', response.data);\r\n                } else {\r\n                    setMetricas(response);\r\n                    console.log('[Dashboard] Métricas recebidas:', response);\r\n                }\r\n            } catch (err) {\r\n                console.log('[Dashboard] Erro ao buscar métricas:', err);\r\n                setError('Erro ao carregar dados do usuário');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n        fetchMetricas();\r\n    }, [user, mesAtual, anoAtual]);\r\n    \r\n\r\n    // --- Renderização de Carregamento ---\r\n    if (loading) {\r\n        return <ActivityIndicator style={styles.loading} size=\"large\" color=\"#1976d2\" />;\r\n    }\r\n\r\n    // --- Componente de Card Reutilizável com Toggle ---\r\n    const DashboardCard = ({ title, cardId, children }) => (\r\n        <Card style={styles.card}>\r\n            <TouchableOpacity \r\n                style={styles.cardHeader} \r\n                onPress={() => toggleCardExpansao(cardId)}\r\n                activeOpacity={0.8}\r\n            >\r\n                <View style={styles.cardTitleContainer}>\r\n                    <Icon \r\n                        name=\"drag-indicator\" \r\n                        size={18} \r\n                        color=\"#ccc\" \r\n                        style={styles.dragIcon}\r\n                    />\r\n                    <Text style={styles.cardTitle}>{title}</Text>\r\n                </View>\r\n                <Icon \r\n                    name={cardsExpandidos[cardId] ? \"expand-less\" : \"expand-more\"} \r\n                    size={24} \r\n                    color=\"#6c757d\"\r\n                />\r\n            </TouchableOpacity>\r\n            \r\n            {cardsExpandidos[cardId] && (\r\n                <View style={styles.cardContent}>\r\n                    {children}\r\n                </View>\r\n            )}\r\n        </Card>\r\n    );\r\n\r\n    // --- Conteúdo Específico dos Cards ---\r\n    const RenderResultadoDoMes = () => (\r\n        <>\r\n            {/* O Gráfico de Barras precisa ser implementado com uma biblioteca como react-native-chart-kit */}\r\n            <View style={styles.chartPlaceholder}>\r\n                <Text style={styles.chartText}>[Placeholder: Gráfico de Receitas vs Despesas]</Text>\r\n            </View>\r\n            <View style={[styles.resultadoBox, { backgroundColor: '#e9ecef' }]}>\r\n                <Text style={styles.resultadoCaption}>Resultado Líquido</Text>\r\n                <Text style={[\r\n                    styles.resultadoValue, \r\n                    { color: resultado >= 0 ? '#00B389' : '#FF4873' }\r\n                ]}>\r\n                    {formatarMoeda(resultado)}\r\n                </Text>\r\n            </View>\r\n        </>\r\n    );\r\n\r\n    const RenderImpostos = () => (\r\n        <>\r\n            {/* --- CARNÊ-LEÃO (PF) --- */}\r\n            {(user?.tipoPessoa === 'PF' || user?.tipoPessoa === 'HIBRIDO') && (\r\n                <View style={styles.impostosSection}>\r\n                    <Text style={styles.impostosSubtitle}>Carnê-Leão (PF)</Text>\r\n                    <DataListItem\r\n                        label=\"Rendimentos (PF)\"\r\n                        value={formatarMoeda(metricas?.pessoaFisica?.rendimentos)}\r\n                        valueColor=\"#00B389\"\r\n                        valueWeight=\"700\"\r\n                    />\r\n                    <DataListItem\r\n                        label=\"Despesas Dedutíveis\"\r\n                        value={formatarMoeda(metricas?.pessoaFisica?.pagamentos)}\r\n                    />\r\n                    <DataListItem\r\n                        label=\"DNZ (Despesa p/ Zerar DARF)\"\r\n                        value={formatarMoeda(metricas?.pessoaFisica?.dnz)}\r\n                    />\r\n                    <DataListItem\r\n                        label=\"DARF a Pagar\"\r\n                        value={formatarMoeda(metricas?.pessoaFisica?.darf)}\r\n                        showBorder\r\n                        valueColor=\"#FF4873\"\r\n                        valueWeight=\"700\"\r\n                    />\r\n                </View>\r\n            )}\r\n\r\n            {/* --- SIMPLES NACIONAL (PJ) --- */}\r\n            {(user?.tipoPessoa === 'PJ' || user?.tipoPessoa === 'HIBRIDO') && (\r\n                <View style={[styles.impostosSection, user?.tipoPessoa === 'HIBRIDO' && { marginTop: 16 }]}>\r\n                    <Text style={styles.impostosSubtitle}>Simples Nacional (PJ)</Text>\r\n                    <DataListItem\r\n                        label=\"Faturamento (PJ)\"\r\n                        value={formatarMoeda(metricas?.pessoaJuridica?.faturamento)}\r\n                        valueColor=\"#00B389\"\r\n                        valueWeight=\"700\"\r\n                    />\r\n                    <DataListItem\r\n                        label=\"RBT12 (Receita 12 meses)\"\r\n                        value={formatarMoeda(metricas?.pessoaJuridica?.rbt12)}\r\n                    />\r\n                    <DataListItem\r\n                        label=\"Alíquota Efetiva\"\r\n                        value={`${metricas?.pessoaJuridica?.aliquotaEfetiva}%`}\r\n                    />\r\n                    <DataListItem\r\n                        label=\"DAS a Pagar\"\r\n                        value={formatarMoeda(metricas?.pessoaJuridica?.das)}\r\n                        showBorder\r\n                        valueColor=\"#FF4873\"\r\n                        valueWeight=\"700\"\r\n                    />\r\n                </View>\r\n            )}\r\n        </>\r\n    );\r\n\r\n    const RenderDespesas = () => {\r\n        const despesasData = metricas?.despesasIndividuais || [];\r\n        const totalDespesas = despesasData.reduce((acc, despesa) => acc + parseFloat(despesa.value || 0), 0);\r\n        return (\r\n            <>\r\n                <PieChart\r\n                    data={despesasData.map((despesa, idx) => ({\r\n                        name: despesa.name,\r\n                        population: despesa.value,\r\n                        color: ['#3f51b5', '#f50057', '#00B389', '#FF4873', '#FFC107', '#009688'][idx % 6],\r\n                        legendFontColor: '#333',\r\n                        legendFontSize: 12\r\n                    }))}\r\n                    width={screenWidth - 40}\r\n                    height={220}\r\n                    chartConfig={{\r\n                        color: (opacity = 1) => `rgba(63, 81, 181, ${opacity})`,\r\n                    }}\r\n                    accessor=\"population\"\r\n                    backgroundColor=\"transparent\"\r\n                    paddingLeft=\"15\"\r\n                    absolute\r\n                />\r\n                <View style={styles.list}>\r\n                    {despesasData.map((despesa, idx) => {\r\n                        const percent = totalDespesas > 0 ? Math.round((parseFloat(despesa.value || 0) / totalDespesas) * 100) : 0;\r\n                        return (\r\n                            <DataListItem\r\n                                key={despesa.name}\r\n                                label={`${despesa.name} (${percent}%)`}\r\n                                value={`-R$ ${parseFloat(despesa.value || 0).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`}\r\n                                showBorder\r\n                            />\r\n                        );\r\n                    })}\r\n                    <DataListItem\r\n                        label=\"Total\"\r\n                        value={`-R$ ${totalDespesas.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`}\r\n                        valueColor=\"#FF4873\"\r\n                        valueWeight=\"700\"\r\n                    />\r\n                </View>\r\n            </>\r\n        );\r\n    };\r\n\r\n\r\n    // --- Renderização Principal ---\r\n    return (\r\n        <ScrollView style={styles.container}>\r\n            <View style={styles.header}>\r\n                <Text style={styles.title}>Visão Geral</Text>\r\n                <Text style={styles.periodo}>\r\n                    Período: <Text style={styles.bold}>{meses[mesAtual - 1]}/{anoAtual}</Text>\r\n                </Text>\r\n            </View>\r\n\r\n            {/* Card: Resultado do Mês */}\r\n            <DashboardCard title=\"Resultado do Mês\" cardId=\"resultado\">\r\n                <RenderResultadoDoMes />\r\n            </DashboardCard>\r\n\r\n            {/* Card: Impostos */}\r\n            <DashboardCard title=\"Impostos\" cardId=\"impostos\">\r\n                <RenderImpostos />\r\n            </DashboardCard>\r\n\r\n            {/* Card: Despesas por Categoria (Gráfico) */}\r\n            <DashboardCard title=\"Despesas por Categoria\" cardId=\"despesas\">\r\n                <RenderDespesas />\r\n            </DashboardCard>\r\n\r\n            {/* Adicione outros cards conforme necessário, como receitas, lançamentos, plano de contas, etc. */}\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: { \r\n        flex: 1, \r\n        backgroundColor: '#1f1f1fff', \r\n        padding: 16 \r\n    },\r\n    loading: { \r\n        marginTop: 40 \r\n    },\r\n    header: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: 16,\r\n    },\r\n    title: { \r\n        fontSize: 24, \r\n        fontWeight: 'bold', \r\n        color: '#1976d2' \r\n    },\r\n    periodo: {\r\n        fontSize: 14,\r\n        color: '#6c757d',\r\n    },\r\n    bold: {\r\n        fontWeight: 'bold',\r\n    },\r\n    error: { \r\n        color: 'red', \r\n        textAlign: 'center', \r\n        marginBottom: 8 \r\n    },\r\n    card: { \r\n        marginBottom: 20, \r\n        elevation: 3, // Sombra para Android\r\n        shadowColor: '#000', // Sombra para iOS\r\n        shadowOffset: { width: 0, height: 2 },\r\n        shadowOpacity: 0.1,\r\n        shadowRadius: 3,\r\n    },\r\n    cardHeader: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        padding: 16,\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: '#eee',\r\n    },\r\n    cardTitleContainer: {\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n    },\r\n    dragIcon: {\r\n        marginRight: 4,\r\n        // O drag and drop nativo não funciona no RN. O ícone é apenas visual aqui.\r\n    },\r\n    cardTitle: { \r\n        fontSize: 18, \r\n        fontWeight: 'bold', \r\n        color: '#333' \r\n    },\r\n    cardContent: {\r\n        padding: 16,\r\n    },\r\n    // Estilos do DataListItem (já existiam, apenas ajustados)\r\n    listItem: { \r\n        flexDirection: 'row', \r\n        justifyContent: 'space-between', \r\n        paddingVertical: 8 \r\n    },\r\n    listItemBorder: { \r\n        borderBottomWidth: 1, \r\n        borderBottomColor: '#eee' \r\n    },\r\n    listLabel: { \r\n        fontSize: 16, \r\n        color: '#555' \r\n    },\r\n    listValue: { \r\n        fontSize: 16, \r\n    },\r\n    list: {\r\n        // Estilo para o container da lista de despesas/receitas\r\n        paddingTop: 8,\r\n    },\r\n    // Estilos Resultado do Mês\r\n    chartPlaceholder: {\r\n        height: 150,\r\n        backgroundColor: '#f0f0f0',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 4,\r\n        marginBottom: 16,\r\n    },\r\n    chartText: {\r\n        color: '#999',\r\n        fontSize: 14,\r\n    },\r\n    resultadoBox: {\r\n        padding: 12,\r\n        borderRadius: 4,\r\n        alignItems: 'center',\r\n        borderWidth: 1,\r\n        borderColor: '#ddd',\r\n    },\r\n    resultadoCaption: {\r\n        fontSize: 12,\r\n        color: '#6c757d',\r\n    },\r\n    resultadoValue: {\r\n        fontSize: 32,\r\n        fontWeight: '700',\r\n    },\r\n    // Estilos Impostos\r\n    impostosSection: {\r\n        marginBottom: 8,\r\n    },\r\n    impostosSubtitle: {\r\n        fontSize: 16,\r\n        fontWeight: '600',\r\n        color: '#6c757d',\r\n        marginBottom: 8,\r\n    },\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}