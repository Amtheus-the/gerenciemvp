{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport { TextInput, Button, Text, Divider, HelperText } from 'react-native-paper';\nimport { useNavigation } from '@react-navigation/native';\nimport { useAuth } from \"../context/AuthContext\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Login = function Login() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    senha = _useState4[0],\n    setSenha = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    loading = _useState8[0],\n    setLoading = _useState8[1];\n  var navigation = useNavigation();\n  var _useAuth = useAuth(),\n    login = _useAuth.login;\n  var handleSubmit = function () {\n    var _ref = _asyncToGenerator(function* () {\n      setError('');\n      setLoading(true);\n      console.log('[Login] Iniciando login...');\n      if (!email || !senha) {\n        setError('Preencha todos os campos');\n        setLoading(false);\n        return;\n      }\n      try {\n        console.log('[Login] Chamando login() do contexto...');\n        var result = yield login(email, senha);\n        console.log('[Login] Resultado do login:', result);\n        if (result.success) {\n          var _result$user;\n          console.log('[Login] Login bem-sucedido! Redirecionando...');\n          if ((_result$user = result.user) != null && _result$user.isAdmin) {\n            navigation.navigate('AdminDashboard');\n          } else {\n            navigation.navigate('Dashboard');\n          }\n        } else {\n          console.log('[Login] Erro no login:', result.message);\n          setError(result.message);\n        }\n      } catch (err) {\n        console.log('[Login] Erro inesperado:', err);\n        setError('Erro inesperado ao fazer login');\n      }\n      setLoading(false);\n    });\n    return function handleSubmit() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return _jsx(KeyboardAvoidingView, {\n    style: styles.container,\n    behavior: \"padding\",\n    children: _jsxs(View, {\n      style: styles.paper,\n      children: [_jsx(Text, {\n        variant: \"headlineMedium\",\n        style: styles.title,\n        children: \"Gerencie\"\n      }), _jsx(Text, {\n        variant: \"bodyMedium\",\n        style: styles.subtitle,\n        children: \"Sistema de Gest\\xE3o Tribut\\xE1ria para Dentistas\"\n      }), error ? _jsx(HelperText, {\n        type: \"error\",\n        visible: true,\n        style: styles.error,\n        children: error\n      }) : null, _jsx(TextInput, {\n        label: \"E-mail\",\n        value: email,\n        onChangeText: setEmail,\n        autoCapitalize: \"none\",\n        keyboardType: \"email-address\",\n        style: styles.input\n      }), _jsx(TextInput, {\n        label: \"Senha\",\n        value: senha,\n        onChangeText: setSenha,\n        secureTextEntry: true,\n        style: styles.input\n      }), _jsx(Button, {\n        mode: \"contained\",\n        onPress: handleSubmit,\n        loading: loading,\n        disabled: loading,\n        style: styles.button,\n        children: \"Entrar\"\n      }), _jsx(Divider, {\n        style: styles.divider\n      }), _jsx(Button, {\n        mode: \"outlined\",\n        onPress: function onPress() {\n          return navigation.navigate('Cadastro');\n        },\n        children: \"Criar nova conta\"\n      }), _jsx(Text, {\n        style: styles.demo,\n        children: \"Use: demo@exemplo.com / senha123 para testar\"\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    backgroundColor: '#f5f5f5'\n  },\n  paper: {\n    margin: 16,\n    padding: 24,\n    borderRadius: 12,\n    backgroundColor: '#fff',\n    elevation: 3\n  },\n  title: {\n    textAlign: 'center',\n    marginBottom: 8\n  },\n  subtitle: {\n    textAlign: 'center',\n    marginBottom: 16,\n    color: '#888'\n  },\n  input: {\n    marginBottom: 12\n  },\n  button: {\n    marginVertical: 12\n  },\n  divider: {\n    marginVertical: 12\n  },\n  error: {\n    textAlign: 'center',\n    marginBottom: 8\n  },\n  demo: {\n    textAlign: 'center',\n    marginTop: 16,\n    color: '#888'\n  }\n});\nexport default Login;","map":{"version":3,"names":["React","useState","View","StyleSheet","KeyboardAvoidingView","TextInput","Button","Text","Divider","HelperText","useNavigation","useAuth","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","senha","setSenha","_useState5","_useState6","error","setError","_useState7","_useState8","loading","setLoading","navigation","_useAuth","login","handleSubmit","_ref","_asyncToGenerator","console","log","result","success","_result$user","user","isAdmin","navigate","message","err","apply","arguments","style","styles","container","behavior","children","paper","variant","title","subtitle","type","visible","label","value","onChangeText","autoCapitalize","keyboardType","input","secureTextEntry","mode","onPress","disabled","button","divider","demo","create","flex","justifyContent","backgroundColor","margin","padding","borderRadius","elevation","textAlign","marginBottom","color","marginVertical","marginTop"],"sources":["C:/mvp_gerencie/mobile/src/screens/Login.js"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { View, StyleSheet, KeyboardAvoidingView } from 'react-native';\r\nimport { TextInput, Button, Text, Divider, HelperText } from 'react-native-paper';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [senha, setSenha] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const navigation = useNavigation();\r\n  const { login } = useAuth();\r\n\r\n  const handleSubmit = async () => {\r\n    setError('');\r\n    setLoading(true);\r\n    console.log('[Login] Iniciando login...');\r\n    if (!email || !senha) {\r\n      setError('Preencha todos os campos');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    try {\r\n      console.log('[Login] Chamando login() do contexto...');\r\n      const result = await login(email, senha);\r\n      console.log('[Login] Resultado do login:', result);\r\n      if (result.success) {\r\n        console.log('[Login] Login bem-sucedido! Redirecionando...');\r\n        if (result.user?.isAdmin) {\r\n          navigation.navigate('AdminDashboard');\r\n        } else {\r\n          navigation.navigate('Dashboard');\r\n        }\r\n      } else {\r\n        console.log('[Login] Erro no login:', result.message);\r\n        setError(result.message);\r\n      }\r\n    } catch (err) {\r\n      console.log('[Login] Erro inesperado:', err);\r\n      setError('Erro inesperado ao fazer login');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView style={styles.container} behavior=\"padding\">\r\n      <View style={styles.paper}>\r\n        <Text variant=\"headlineMedium\" style={styles.title}>Gerencie</Text>\r\n        <Text variant=\"bodyMedium\" style={styles.subtitle}>\r\n          Sistema de Gestão Tributária para Dentistas\r\n        </Text>\r\n        {error ? (\r\n          <HelperText type=\"error\" visible={true} style={styles.error}>\r\n            {error}\r\n          </HelperText>\r\n        ) : null}\r\n        <TextInput\r\n          label=\"E-mail\"\r\n          value={email}\r\n          onChangeText={setEmail}\r\n          autoCapitalize=\"none\"\r\n          keyboardType=\"email-address\"\r\n          style={styles.input}\r\n        />\r\n        <TextInput\r\n          label=\"Senha\"\r\n          value={senha}\r\n          onChangeText={setSenha}\r\n          secureTextEntry\r\n          style={styles.input}\r\n        />\r\n        <Button\r\n          mode=\"contained\"\r\n          onPress={handleSubmit}\r\n          loading={loading}\r\n          disabled={loading}\r\n          style={styles.button}\r\n        >\r\n          Entrar\r\n        </Button>\r\n        <Divider style={styles.divider} />\r\n        <Button\r\n          mode=\"outlined\"\r\n          onPress={() => navigation.navigate('Cadastro')}\r\n        >\r\n          Criar nova conta\r\n        </Button>\r\n        <Text style={styles.demo}>\r\n          Use: demo@exemplo.com / senha123 para testar\r\n        </Text>\r\n      </View>\r\n    </KeyboardAvoidingView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, justifyContent: 'center', backgroundColor: '#f5f5f5' },\r\n  paper: { margin: 16, padding: 24, borderRadius: 12, backgroundColor: '#fff', elevation: 3 },\r\n  title: { textAlign: 'center', marginBottom: 8 },\r\n  subtitle: { textAlign: 'center', marginBottom: 16, color: '#888' },\r\n  input: { marginBottom: 12 },\r\n  button: { marginVertical: 12 },\r\n  divider: { marginVertical: 12 },\r\n  error: { textAlign: 'center', marginBottom: 8 },\r\n  demo: { textAlign: 'center', marginTop: 16, color: '#888' },\r\n});\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}